<div id="<%= message_variable_name %>_<%%= <%= message_model_name.demodulize.underscore %>.id %>" class="<%= message_variable_name %>"
     style="margin-bottom: 20px; padding: 10px; border-left: 3px solid <%%= <%= message_model_name.demodulize.underscore %>.role == 'user' ? '#007bff' : '#28a745' %>">
  <div style="font-weight: bold; margin-bottom: 5px;">
    <%%= <%= message_model_name.demodulize.underscore %>.role&.capitalize %>
  </div>
  <%% if <%= message_model_name.demodulize.underscore %>.content.present? %>
    <div id="<%= message_variable_name %>_<%%= <%= message_model_name.demodulize.underscore %>.id %>_content" style="white-space: pre-wrap;"><%%= <%= message_model_name.demodulize.underscore %>.content %></div>
  <%% elsif <%= message_model_name.demodulize.underscore %>.content_raw.present? && <%= message_model_name.demodulize.underscore %>.content_raw.is_a?(Hash) %>
    <div id="<%= message_variable_name %>_<%%= <%= message_model_name.demodulize.underscore %>.id %>_content">
      <%%= render "<%= message_model_name.underscore.pluralize %>/content_raw", content: <%= message_model_name.demodulize.underscore %>.content_raw %>
    </div>
  <%% end %>
  <%% if <%= message_model_name.demodulize.underscore %>.tool_call? %>
    <%%= render "<%= message_model_name.underscore.pluralize %>/tool_calls", <%= message_model_name.demodulize.underscore %>: <%= message_model_name.demodulize.underscore %> %>
  <%% end %>
  <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
    <%%= <%= message_model_name.demodulize.underscore %>.created_at&.strftime("%I:%M %p") %>
  </div>
</div>