<%%= tag.div id: dom_id(<%= message_model_name.underscore %>), class: "<%= message_model_name.underscore %>",
    style: "margin-bottom: 20px; padding: 10px; border-left: 3px solid #{<%= message_model_name.underscore %>.role == 'user' ? '#007bff' : '#28a745'};" do %>
  <div style="font-weight: bold; margin-bottom: 5px;">
    <%%= <%= message_model_name.underscore %>.role&.capitalize %>
  </div>
  <div style="white-space: pre-wrap;"><%%= <%= message_model_name.underscore %>.content %></div>
  <%% if <%= message_model_name.underscore %>.tool_calls.any? %>
    <div style="display: flex; flex-direction: column; gap: 3px; align-items: flex-start; font-family: monospace;">
      <%% <%= message_model_name.underscore %>.tool_calls.each do |tool_call| %>
        <div style="background: #eee; padding: 5px; border-radius: 4px;">
          <%%= tool_call.name %>(<%%= tool_call.arguments.to_json %>)
        </div>
      <%% end %>
    </div>
  <%% end %>
  <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
    <%%= <%= message_model_name.underscore %>.created_at&.strftime("%I:%M %p") %>
  </div>
<%% end %>