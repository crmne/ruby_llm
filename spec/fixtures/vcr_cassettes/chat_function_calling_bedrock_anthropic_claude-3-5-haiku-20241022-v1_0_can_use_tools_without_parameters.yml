---
http_interactions:
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the best language
        to learn?"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"best_language_to_learn","description":"Gets
        the best language to learn","inputSchema":{"json":{"type":"object","properties":{},"required":[]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012359Z
      X-Amz-Content-Sha256:
      - 36f7092c79afe3fb5a10946f7faa8c29732769b2bf0dbcd0441ee4fe4d8001c5
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=387ac555292ac294beb57e9a1c5553c38ce42e6ec5695a0b8678f047b99f2e5e
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:24:01 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '476'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 2185bb3c-07ff-4987-a953-5d00fbdce250
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1757},"output":{"message":{"content":[{"text":"Let
        me help you find out the best language to learn by using the available tool."},{"toolUse":{"input":{},"name":"best_language_to_learn","toolUseId":"tooluse_qXYN60fHRUiiebrpf78vJw"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":327,"outputTokens":58,"totalTokens":385}}'
  recorded_at: Tue, 16 Sep 2025 01:24:01 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the best language
        to learn?"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_qXYN60fHRUiiebrpf78vJw","name":"best_language_to_learn","input":{}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_qXYN60fHRUiiebrpf78vJw","content":[{"text":"Ruby"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"best_language_to_learn","description":"Gets
        the best language to learn","inputSchema":{"json":{"type":"object","properties":{},"required":[]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012401Z
      X-Amz-Content-Sha256:
      - 6af324307f4448505677dc63bd268407d2493549fcb0ed26259b6d1c3ebccb12
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=04bbb5aa527d562f30d6de0b9c496d7763fc8774213a9969217629ce2ea6867c
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 429
      message: Too Many Requests
    headers:
      Date:
      - Tue, 16 Sep 2025 01:24:02 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '65'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 265bdf9d-775f-4c94-ab3b-08c63644d646
      X-Amzn-Errortype:
      - ThrottlingException:http://internal.amazon.com/coral/com.amazon.bedrock/
    body:
      encoding: UTF-8
      string: '{"message":"Too many requests, please wait before trying again."}'
  recorded_at: Tue, 16 Sep 2025 01:24:02 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the best language
        to learn?"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_qXYN60fHRUiiebrpf78vJw","name":"best_language_to_learn","input":{}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_qXYN60fHRUiiebrpf78vJw","content":[{"text":"Ruby"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"best_language_to_learn","description":"Gets
        the best language to learn","inputSchema":{"json":{"type":"object","properties":{},"required":[]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012408Z
      X-Amz-Content-Sha256:
      - 6af324307f4448505677dc63bd268407d2493549fcb0ed26259b6d1c3ebccb12
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=2b3c35a83fbdb7a600ed1f126913b85faab4d8d5a6b0b7ceec6c7327f93bbb11
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:24:12 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '1088'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - ce4da562-4833-44ee-ad7b-3206f296345a
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":3786},"output":{"message":{"content":[{"text":"Based
        on the tool''s recommendation, Ruby is suggested as the best language to learn.
        Ruby is a dynamic, object-oriented programming language known for its simplicity
        and readability. It''s particularly popular in web development, especially
        with the Ruby on Rails framework.\n\nSome reasons why Ruby might be a great
        language to learn include:\n1. Clean and easy-to-read syntax\n2. Strong community
        support\n3. Versatility in web development\n4. Quick prototyping capabilities\n5.
        Used in many startups and tech companies\n\nHowever, the \"best\" language
        can depend on your specific goals, such as:\n- Web development\n- Data science\n-
        Mobile app development\n- Career objectives\n\nWould you like to know more
        about why Ruby is recommended or explore how it might fit your programming
        goals?"}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":380,"outputTokens":172,"totalTokens":552}}'
  recorded_at: Tue, 16 Sep 2025 01:24:12 GMT
recorded_with: VCR 6.3.1
