---
http_interactions:
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the best language
        to learn?"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"best_language_to_learn","description":"Gets
        the best language to learn","inputSchema":{"json":{"type":"object","properties":{},"required":[]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250911T041419Z
      X-Amz-Content-Sha256:
      - 36f7092c79afe3fb5a10946f7faa8c29732769b2bf0dbcd0441ee4fe4d8001c5
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=2266cfd5ea157bfecd237fa54e48d17203c3a4bfa7f35ea88ec4161fd6d7cdf4
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 11 Sep 2025 04:14:21 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '476'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 53646709-c50c-40a0-9b41-cb4111325950
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1443},"output":{"message":{"content":[{"text":"Let
        me help you find out the best language to learn by using the available tool."},{"toolUse":{"input":{},"name":"best_language_to_learn","toolUseId":"tooluse_gFNOA7-RSIOXwLxqi4ZtVA"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":327,"outputTokens":58,"totalTokens":385}}'
  recorded_at: Thu, 11 Sep 2025 04:14:21 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the best language
        to learn?"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_gFNOA7-RSIOXwLxqi4ZtVA","name":"best_language_to_learn","input":{}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_gFNOA7-RSIOXwLxqi4ZtVA","content":[{"text":"Ruby"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"best_language_to_learn","description":"Gets
        the best language to learn","inputSchema":{"json":{"type":"object","properties":{},"required":[]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250911T041421Z
      X-Amz-Content-Sha256:
      - 39a33898df4c024b2bc98cba729a8f0304f8c90e87d3969ef4d02c1dacd78dee
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=1fa9ce73b9ef7dedb783cc90ab47861a6361b2552f21877ec58b632d6ef84c50
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 11 Sep 2025 04:14:26 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '1096'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - a9c3f44a-b665-42c8-ab95-992da55ac1fa
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":3919},"output":{"message":{"content":[{"text":"According
        to the tool I consulted, Ruby is the best language to learn right now! Ruby
        is a dynamic, object-oriented programming language known for its simplicity
        and readability. It''s particularly popular for web development, especially
        with the Ruby on Rails framework. \n\nSome reasons why Ruby might be a great
        language to learn include:\n1. Easy to read and write syntax\n2. Strong community
        support\n3. Great for web development\n4. Versatile and used in various domains
        like web apps, scripting, and automation\n\nHowever, the \"best\" language
        can depend on your personal goals, such as:\n- Web development\n- Data science\n-
        Mobile app development\n- Game development\n\nWould you like to know more
        about why Ruby is recommended or discuss how it might fit your specific programming
        interests?"}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":380,"outputTokens":172,"totalTokens":552}}'
  recorded_at: Thu, 11 Sep 2025 04:14:26 GMT
recorded_with: VCR 6.3.1
