---
http_interactions:
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string: '{"messages":[{"role":"user","content":[{"text":"What''s in this file?"},{"document":{"format":"txt","name":"rubytxt","source":{"bytes":"UnVieSBpcyB0aGUgYmVzdC4="}}}]}],"inferenceConfig":{"maxTokens":4096}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041205Z
        X-Amz-Content-Sha256:
          - 1f1a3f103a6623b8de2c1994c3ee7a715490d0aab2287c14c1787a3d4c682a57
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=30ab9b970f5945a03b96d1bc5ed4100cd6ed6477c80ddab7f66d6be70068b9a3
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:12:08 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "383"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - e996c67a-e1e8-4948-bbcf-7411331fdd1c
      body:
        encoding: UTF-8
        string:
          '{"metrics":{"latencyMs":965},"output":{"message":{"content":[{"text":"According
          to the document, the file \"rubytxt.txt\" contains the text: \"Ruby is the
          best.\""}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":63,"outputTokens":27,"totalTokens":90}}'
    recorded_at: Thu, 11 Sep 2025 04:12:08 GMT
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s in this file?"},{"document":{"format":"txt","name":"rubytxt","source":{"bytes":"UnVieSBpcyB0aGUgYmVzdC4="}}}]},{"role":"assistant","content":[{"text":"According
          to the document, the file \"rubytxt.txt\" contains the text: \"Ruby is the
          best.\""}]},{"role":"user","content":[{"text":"and in this one?"},{"document":{"format":"txt","name":"rubyxml","source":{"bytes":"PHRydWlzbT5SdWJ5IGlzIHRoZSBiZXN0PC90cnVpc20+"}}}]}],"inferenceConfig":{"maxTokens":4096}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041208Z
        X-Amz-Content-Sha256:
          - 0f83a570b1218a970b81880d9c977a5e66c8f1b0faf94f85cdeca9b2f087a87e
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=62234553f642d7a60df6ac00b088e53e2f837cbdae6721c4dc1d91587a274091
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:12:10 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "416"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - 0710d3eb-546d-49c2-a515-ac54cd581f83
      body:
        encoding: UTF-8
        string:
          '{"metrics":{"latencyMs":1138},"output":{"message":{"content":[{"text":"In
          the file \"rubyxml.txt\", there is an XML-like content with a tag <truism>
          that contains the text \"Ruby is the best\"."}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":154,"outputTokens":37,"totalTokens":191}}'
    recorded_at: Thu, 11 Sep 2025 04:12:10 GMT
recorded_with: VCR 6.3.1
