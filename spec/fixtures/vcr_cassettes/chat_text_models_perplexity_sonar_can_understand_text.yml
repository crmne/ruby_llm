---
http_interactions:
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        in this file?"},{"type":"text","text":"<file name=''ruby.txt'' mime_type=''text/plain''>Ruby
        is the best.</file>"}]}],"stream":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 14:01:33 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6IjllYjU1MjU1LTc3NjUtNDc4Yi04N2VjLTg5YTAwZTY5MjFmOCIsIm1vZGVsIjoic29uYXIiLCJjcmVhdGVkIjoxNzY3OTY3MjkzLCJ1c2FnZSI6eyJwcm9tcHRfdG9rZW5zIjoyNSwiY29tcGxldGlvbl90b2tlbnMiOjE5LCJ0b3RhbF90b2tlbnMiOjQ0LCJzZWFyY2hfY29udGV4dF9zaXplIjoibG93IiwiY29zdCI6eyJpbnB1dF90b2tlbnNfY29zdCI6MC4wLCJvdXRwdXRfdG9rZW5zX2Nvc3QiOjAuMCwicmVxdWVzdF9jb3N0IjowLjAwNSwidG90YWxfY29zdCI6MC4wMDV9fSwiY2l0YXRpb25zIjpbImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1J1YnlfKHByb2dyYW1taW5nX2xhbmd1YWdlKSIsImh0dHBzOi8vd3d3LnR1dG9yaWFsc3BvaW50LmNvbS9ydWJ5L3J1Ynlfb3ZlcnZpZXcuaHRtIiwiaHR0cHM6Ly93d3cucGx1cmFsc2lnaHQuY29tL3Jlc291cmNlcy9ibG9nL2Nsb3VkL3doYXQtaXMtdGhlLXJ1YnktcHJvZ3JhbW1pbmctbGFuZ3VhZ2UiLCJodHRwczovL3d3dy5nZWVrc2ZvcmdlZWtzLm9yZy9ydWJ5L3J1YnktcHJvZ3JhbW1pbmctbGFuZ3VhZ2UvIiwiaHR0cHM6Ly93d3cucnVieS1sYW5nLm9yZy9lbi9hYm91dC8iLCJodHRwczovL2xhdW5jaHNjaG9vbC5jb20vYm9va3MvcnVieS9yZWFkL2ludHJvZHVjdGlvbiIsImh0dHBzOi8vd3d3LnJ1YnktbGFuZy5vcmcvZW4vIiwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1VWW0wa2ZuUlRKayJdLCJzZWFyY2hfcmVzdWx0cyI6W3sidGl0bGUiOiJSdWJ5IChwcm9ncmFtbWluZyBsYW5ndWFnZSkgLSBXaWtpcGVkaWEiLCJ1cmwiOiJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SdWJ5Xyhwcm9ncmFtbWluZ19sYW5ndWFnZSkiLCJkYXRlIjoiMjAwMS0xMC0xNyIsImxhc3RfdXBkYXRlZCI6IjIwMjUtMTItMTAiLCJzbmlwcGV0IjoiUnVieSBpcyBhIGdlbmVyYWwtcHVycG9zZSBwcm9ncmFtbWluZyBsYW5ndWFnZS4gSXQgd2FzIGRlc2lnbmVkIHdpdGggYW4gZW1waGFzaXMgb24gcHJvZ3JhbW1pbmcgcHJvZHVjdGl2aXR5IGFuZCBzaW1wbGljaXR5LiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJSdWJ5IC0gT3ZlcnZpZXcgLSBUdXRvcmlhbHMgUG9pbnQiLCJ1cmwiOiJodHRwczovL3d3dy50dXRvcmlhbHNwb2ludC5jb20vcnVieS9ydWJ5X292ZXJ2aWV3Lmh0bSIsImRhdGUiOiIyMDE5LTAzLTAxIiwibGFzdF91cGRhdGVkIjoiMjAyNi0wMS0wOCIsInNuaXBwZXQiOiJSdWJ5IGlzIGEgc2VydmVyLXNpZGUgc2NyaXB0aW5nIGxhbmd1YWdlIHNpbWlsYXIgdG8gUHl0aG9uIGFuZCBQRVJMLiBSdWJ5IGNhbiBiZSB1c2VkIHRvIHdyaXRlIENvbW1vbiBHYXRld2F5IEludGVyZmFjZSAoQ0dJKSBzY3JpcHRzLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJXaGF0IGlzIHRoZSBSdWJ5IHByb2dyYW1taW5nIGxhbmd1YWdlPyAtIFBsdXJhbHNpZ2h0IiwidXJsIjoiaHR0cHM6Ly93d3cucGx1cmFsc2lnaHQuY29tL3Jlc291cmNlcy9ibG9nL2Nsb3VkL3doYXQtaXMtdGhlLXJ1YnktcHJvZ3JhbW1pbmctbGFuZ3VhZ2UiLCJkYXRlIjoiMjAyNS0wNC0xNiIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDEtMDgiLCJzbmlwcGV0IjoiUnVieSBpcyBhbiBvcGVuLXNvdXJjZSBvYmplY3Qtb3JpZW50ZWQgc2NyaXB0aW5nIGxhbmd1YWdlIGludmVudGVkIGluIHRoZSBtaWQtOTBzIGJ5IFl1a2loaXJvIE1hdHN1bW90by4gUnVieSBpcyBncmVhdCBmb3IgYnVpbGRpbmcgZGVza3RvcCBhcHBsaWNhdGlvbnMsIC4uLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJSdWJ5IFByb2dyYW1taW5nIExhbmd1YWdlIC0gR2Vla3Nmb3JHZWVrcyIsInVybCI6Imh0dHBzOi8vd3d3LmdlZWtzZm9yZ2Vla3Mub3JnL3J1YnkvcnVieS1wcm9ncmFtbWluZy1sYW5ndWFnZS8iLCJkYXRlIjoiMjAyNS0wOS0wNCIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDEtMDciLCJzbmlwcGV0IjoiUnVieSBpcyBhIHBvcHVsYXIgYmFja2VuZCBwcm9ncmFtbWluZyBsYW5ndWFnZSwgd2lkZWx5IHVzZWQgZm9yIGJ1aWxkaW5nIG1vZGVybiBhcHBsaWNhdGlvbnMgYW5kIHNlcnZpY2VzLiBJdCBtYWtlcyBkZXZlbG9wbWVudCBmYXN0ZXIsIGVhc2llciwgLi4uIiwic291cmNlIjoid2ViIn0seyJ0aXRsZSI6IkFib3V0IFJ1YnkiLCJ1cmwiOiJodHRwczovL3d3dy5ydWJ5LWxhbmcub3JnL2VuL2Fib3V0LyIsImRhdGUiOiIyMDAzLTEyLTIyIiwibGFzdF91cGRhdGVkIjoiMjAyNi0wMS0wOCIsInNuaXBwZXQiOiJSdWJ5IGlzIGEgbGFuZ3VhZ2Ugb2YgY2FyZWZ1bCBiYWxhbmNlLiBJdHMgY3JlYXRvciwgWXVraWhpcm8g4oCcTWF0euKAnSBNYXRzdW1vdG8sIGJsZW5kZWQgcGFydHMgb2YgaGlzIGZhdm9yaXRlIGxhbmd1YWdlcyAoUGVybCwgU21hbGx0YWxrLCBFaWZmZWwsIEFkYSwgYW5kIExpc3ApIiwic291cmNlIjoid2ViIn0seyJ0aXRsZSI6IkFuIGludHJvZHVjdGlvbiB0byBSdWJ5IFByb2dyYW1taW5nIC0gTGF1bmNoIFNjaG9vbCIsInVybCI6Imh0dHBzOi8vbGF1bmNoc2Nob29sLmNvbS9ib29rcy9ydWJ5L3JlYWQvaW50cm9kdWN0aW9uIiwibGFzdF91cGRhdGVkIjoiMjAyNi0wMS0wNiIsInNuaXBwZXQiOiJSdWJ5IHdhcyBjcmVhdGVkIGJ5IFl1a2loaXJvIE1hdHN1bW90bywgb3IgXCJNYXR6XCIsIGluIEphcGFuLiBJdCB3YXMgZGVzaWduZWQgZm9yIHByb2dyYW1tZXIgcHJvZHVjdGl2aXR5IHdpdGggdGhlIGlkZWEgdGhhdCBwcm9ncmFtbWluZyBzaG91bGQgYmUgZnVuIGZvciAuLi4iLCJzb3VyY2UiOiJ3ZWIifSx7InRpdGxlIjoiUnVieSBQcm9ncmFtbWluZyBMYW5ndWFnZSIsInVybCI6Imh0dHBzOi8vd3d3LnJ1YnktbGFuZy5vcmcvZW4vIiwiZGF0ZSI6IjIwMjUtMTItMjUiLCJsYXN0X3VwZGF0ZWQiOiIyMDI1LTEyLTI2Iiwic25pcHBldCI6IlJ1YnkgaGFzIGEgc2ltcGxlIGFuZCBpbnR1aXRpdmUgc3ludGF4IHRoYXQgcmVhZHMgbGlrZSBuYXR1cmFsIGxhbmd1YWdlLiBpdCdzIGZyaWVuZGx5IHRvIGJlZ2lubmVycyBhbmQgbWFpbnRhaW5hYmxlIGZvciBleHBlcmllbmNlZCBkZXZlbG9wZXJzLiIsInNvdXJjZSI6IndlYiJ9LHsidGl0bGUiOiJSdWJ5IGluIDEwMCBTZWNvbmRzIC0gWW91VHViZSIsInVybCI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9VVltMGtmblJUSmsiLCJkYXRlIjoiMjAyMi0wMS0zMSIsImxhc3RfdXBkYXRlZCI6IjIwMjYtMDEtMDQiLCJzbmlwcGV0IjoiUnVieSBpcyBhIGR5bmFtaWMgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UgbW9zdCB3ZWxsLWtub3cgZm9yIHBvd2VyaW5nIHRoZSBSdWJ5IG9uIFJhaWxzIGZ1bGxzdGFjayB3ZWIgZnJhbWV3b3JrLiBMZWFybiB3aHkgZGV2ZWxvcGVycyBsb3ZlIHRoZSAuLi4iLCJzb3VyY2UiOiJ3ZWIifV0sIm9iamVjdCI6ImNoYXQuY29tcGxldGlvbiIsImNob2ljZXMiOlt7ImluZGV4IjowLCJtZXNzYWdlIjp7InJvbGUiOiJhc3Npc3RhbnQiLCJjb250ZW50IjoiVGhlIGZpbGUgYHJ1YnkudHh0YCBjb250YWlucyBhIHNpbmdsZSBsaW5lIG9mIHRleHQ6XG5cbmBSdWJ5IGlzIHRoZSBiZXN0LmAifSwiZGVsdGEiOnsicm9sZSI6ImFzc2lzdGFudCIsImNvbnRlbnQiOiIifSwiZmluaXNoX3JlYXNvbiI6InN0b3AifV19
  recorded_at: Fri, 09 Jan 2026 14:01:33 GMT
- request:
    method: post
    uri: https://api.perplexity.ai/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"sonar","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        in this file?"},{"type":"text","text":"<file name=''ruby.txt'' mime_type=''text/plain''>Ruby
        is the best.</file>"}]},{"role":"assistant","content":"The file `ruby.txt`
        contains a single line of text:\n\n`Ruby is the best.`"},{"role":"user","content":[{"type":"text","text":"and
        in this one?"},{"type":"text","text":"<file name=''ruby.xml'' mime_type=''application/xml''><truism>Ruby
        is the best</truism></file>"}]}],"stream":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <PERPLEXITY_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 14:01:36 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - "<COOKIE>"
      Strict-Transport-Security:
      - max-age=15552000; includeSubDomains; preload
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: '{"id":"422cf2f4-550a-44eb-8d02-af1d8b446fac","model":"sonar","created":1767967296,"usage":{"prompt_tokens":74,"completion_tokens":54,"total_tokens":128,"search_context_size":"low","cost":{"input_tokens_cost":0.0,"output_tokens_cost":0.0,"request_cost":0.005,"total_cost":0.005}},"citations":["https://www.geeksforgeeks.org/html/how-to-define-structure-of-xml-document/","https://masking.delphix.com/docs/latest/xml-structure","https://www.w3schools.com/xml/xml_tree.asp","https://aws.amazon.com/what-is/xml/","https://www.websydian.com/olddoc/v65/source/Websydian%20v6.5/TransacXML/wsyxml/xmlstructure.htm","https://helpx.adobe.com/indesign/using/structuring-documents-xml.html","https://edoras.sdsu.edu/doc/mit-scheme-9.2/mit-scheme-ref/XML-Structure.html","https://support.microsoft.com/en-us/office/xml-for-the-uninitiated-a87d234d-4c2e-4409-9cbc-45e4eb857d44","https://www.w3schools.com/xml/xml_elements.asp"],"search_results":[{"title":"How
        to define structure of XML document ? - GeeksforGeeks","url":"https://www.geeksforgeeks.org/html/how-to-define-structure-of-xml-document/","date":"2022-03-09","last_updated":"2026-01-03","snippet":"Rule
        2: XML Documents must have a root element (the supreme parent element) and
        its child elements (sub-elements). To have a better view of ...","source":"web"},{"title":"XML
        structure - Continuous Compliance","url":"https://masking.delphix.com/docs/latest/xml-structure","date":"2025-01-20","last_updated":"2025-12-30","snippet":"Elements:
        Elements are the building blocks of XML documents, denoted by tags. An element
        can contain text, other elements, or a mix of both. Elements are used ...","source":"web"},{"title":"XML
        Tree - W3Schools","url":"https://www.w3schools.com/xml/xml_tree.asp","date":"2026-01-01","last_updated":"2026-01-09","snippet":"XML
        documents are formed as element trees. An XML tree starts at a root element
        and branches from the root to child elements.","source":"web"},{"title":"What
        is XML? - Extensible Markup Language (XML) Explained - AWS","url":"https://aws.amazon.com/what-is/xml/","date":"2026-01-07","last_updated":"2026-01-09","snippet":"All
        XML documents begin with a primary tag, which is called the root element.
        For example, consider the XML file below. <InvitationList> is the root element;
        ...","source":"web"},{"title":"Basic XML structure - Websydian","url":"https://www.websydian.com/olddoc/v65/source/Websydian%20v6.5/TransacXML/wsyxml/xmlstructure.htm","date":"2010-12-31","last_updated":"2026-01-04","snippet":"All
        XML documents can be described as tree-structures. They all have exactly one
        top element. The top element can contain any number of attributes and simple
        ...","source":"web"},{"title":"Structure documents for XML in InDesign - Adobe
        Help Center","url":"https://helpx.adobe.com/indesign/using/structuring-documents-xml.html","date":"2023-05-24","last_updated":"2026-01-08","snippet":"The
        Structure pane displays, in hierarchical form, items in a document that have
        been marked with XML tags. These items are called elements.","source":"web"},{"title":"XML
        Structure - MIT/GNU Scheme 9.2","url":"https://edoras.sdsu.edu/doc/mit-scheme-9.2/mit-scheme-ref/XML-Structure.html","last_updated":"2025-09-22","snippet":"The
        xml-element record represents general XML elements; the bulk of a typical
        XML document consists of these elements. Name is the element name (an XML
        name).","source":"web"},{"title":"XML for the uninitiated - Microsoft Support","url":"https://support.microsoft.com/en-us/office/xml-for-the-uninitiated-a87d234d-4c2e-4409-9cbc-45e4eb857d44","date":"2024-06-06","last_updated":"2025-10-16","snippet":"In
        addition to tagged, well-formed data, XML systems typically use two additional
        components: schemas and transforms. ... A basic XML file structure with a
        schema ...","source":"web"},{"title":"XML Elements - W3Schools","url":"https://www.w3schools.com/xml/xml_elements.asp","date":"2008-01-10","last_updated":"2026-01-08","snippet":"An
        XML element is everything from (including) the element''s start tag to (including)
        the element''s end tag.","source":"web"}],"object":"chat.completion","choices":[{"index":0,"message":{"role":"assistant","content":"The
        file `ruby.xml` contains a single XML element:\n\n```xml\n<truism>Ruby is
        the best</truism>\n```\n\nSo the root element is **`truism`**, and its text
        content is **`Ruby is the best`**."},"delta":{"role":"assistant","content":""},"finish_reason":"stop"}]}'
  recorded_at: Fri, 09 Jan 2026 14:01:36 GMT
recorded_with: VCR 6.4.0
