---
http_interactions:
- request:
    method: post
    uri: https://openrouter.ai/api/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"anthropic/claude-3.5-haiku","messages":[{"role":"user","content":"When
        was the fall of Rome?"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}],"tool_choice":"required"}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Authorization:
      - Bearer <OPENROUTER_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 31 Aug 2025 01:13:31 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Allow-Origin:
      - "*"
      Vary:
      - Accept-Encoding
      Permissions-Policy:
      - payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com"
        "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")
      Referrer-Policy:
      - no-referrer, strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: "\n         \n\n         \n{\"id\":\"gen-1756602810-hpQDX95J40A6Cal5jhu6\",\"provider\":\"Google\",\"model\":\"anthropic/claude-3.5-haiku\",\"object\":\"chat.completion\",\"created\":1756602810,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"id\":\"toolu_vrtx_01Fw5bHBFooudxXQxsUpSpnS\",\"index\":0,\"type\":\"function\",\"function\":{\"name\":\"weather\",\"arguments\":\"{\\\"latitude\\\":
        \\\"41.9028\\\", \\\"longitude\\\": \\\"12.4964\\\"}\"}}]}}],\"usage\":{\"prompt_tokens\":468,\"completion_tokens\":59,\"total_tokens\":527}}"
  recorded_at: Sun, 31 Aug 2025 01:13:31 GMT
- request:
    method: post
    uri: https://openrouter.ai/api/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"anthropic/claude-3.5-haiku","messages":[{"role":"user","content":"When
        was the fall of Rome?"},{"role":"assistant","content":"","tool_calls":[{"id":"toolu_vrtx_01Fw5bHBFooudxXQxsUpSpnS","type":"function","function":{"name":"weather","arguments":"{\"latitude\":\"41.9028\",\"longitude\":\"12.4964\"}"}}]},{"role":"tool","content":"Current
        weather at 41.9028, 12.4964: 15Â°C, Wind: 10 km/h","tool_call_id":"toolu_vrtx_01Fw5bHBFooudxXQxsUpSpnS"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}]}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Authorization:
      - Bearer <OPENROUTER_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 31 Aug 2025 01:13:33 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Allow-Origin:
      - "*"
      Vary:
      - Accept-Encoding
      Permissions-Policy:
      - payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com"
        "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")
      Referrer-Policy:
      - no-referrer, strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: "\n         \n\n         \n\n         \n\n         \n\n         \n\n
        \        \n\n         \n\n         \n\n         \n\n         \n\n         \n{\"id\":\"gen-1756602812-ZrGP9hBw9qoCq6tGrpnU\",\"provider\":\"Google\",\"model\":\"anthropic/claude-3.5-haiku\",\"object\":\"chat.completion\",\"created\":1756602812,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"stop\",\"native_finish_reason\":\"stop\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I
        apologize, but the weather function is not designed to provide historical
        information. Let me answer your question about the fall of Rome directly.\\n\\nThe
        fall of Rome is typically considered to have occurred in 476 CE, when the
        last Roman Emperor in the West, Romulus Augustulus, was deposed by the Germanic
        king Odoacer. This marked the end of the Western Roman Empire, though the
        Eastern Roman Empire (Byzantine Empire) continued to exist for nearly another
        thousand years until Constantinople fell to the Ottoman Turks in 1453.\\n\\nHowever,
        historians debate the exact moment of \\\"fall,\\\" as the decline of the
        Roman Empire was a gradual process that occurred over several centuries. Some
        key events include:\\n\\n1. The division of the Empire into Western and Eastern
        halves in 285 CE\\n2. The sack of Rome by the Visigoths in 410 CE\\n3. The
        final deposition of Romulus Augustulus in 476 CE\\n\\nThe fall of Rome had
        profound consequences, marking the end of classical antiquity and the beginning
        of the medieval period in European history.\",\"refusal\":null,\"reasoning\":null}}],\"usage\":{\"prompt_tokens\":491,\"completion_tokens\":238,\"total_tokens\":729}}"
  recorded_at: Sun, 31 Aug 2025 01:13:37 GMT
recorded_with: VCR 6.3.1
