---
http_interactions:
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the weather
        in Berlin? (52.5200, 13.4050)"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
        current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012337Z
      X-Amz-Content-Sha256:
      - b953cce59aafaeaa008e7d7c66fa77c653a967f1cc0194e6c72264ac7fece23f
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=98f42bfbc043b965aeb22dd5a3b47d162665839db44e39a460c5dc37a61c9083
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:23:39 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '504'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 35737c2a-8d13-4f04-8784-bbf0776106d1
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1838},"output":{"message":{"content":[{"text":"I''ll
        help you check the current weather in Berlin using the provided coordinates."},{"toolUse":{"input":{"latitude":"52.5200","longitude":"13.4050"},"name":"weather","toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":389,"outputTokens":90,"totalTokens":479}}'
  recorded_at: Tue, 16 Sep 2025 01:23:39 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the weather
        in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","content":[{"text":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
        current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012339Z
      X-Amz-Content-Sha256:
      - 444db3bd9b3940cc6cb8e88ade8c2ad34b1b878be9e41a3ea2129da05551c860
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=337df5399c2bd650078e25f29d49a369ab5ec204069640098021f048e77775f4
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:23:42 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '466'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 904661d8-7b50-4067-9c99-eb13a1625bb6
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1882},"output":{"message":{"content":[{"text":"The
        current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
        a mild day in the German capital. Would you like to know anything else about
        the weather?"}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":503,"outputTokens":48,"totalTokens":551}}'
  recorded_at: Tue, 16 Sep 2025 01:23:42 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the weather
        in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","content":[{"text":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
        current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
        a mild day in the German capital. Would you like to know anything else about
        the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
        Paris? (48.8575, 2.3514)"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
        current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012345Z
      X-Amz-Content-Sha256:
      - a0f39ecf0c71eaa04104af2f47ed9c29e3e869a2524f39b5add965bcd3e3efe6
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=8120a847f3d34710e2126608cda648ba73d86b2035249eaffd3067fedace822a
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:23:47 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '410'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 8afa0cc0-026f-4e76-b37f-002da0dadd7b
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1638},"output":{"message":{"content":[{"toolUse":{"input":{"latitude":"48.8575","longitude":"2.3514"},"name":"weather","toolUseId":"tooluse_zrSBB697T2q8gv0fPJ3I2A"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":573,"outputTokens":74,"totalTokens":647}}'
  recorded_at: Tue, 16 Sep 2025 01:23:47 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the weather
        in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","content":[{"text":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
        current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
        a mild day in the German capital. Would you like to know anything else about
        the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
        Paris? (48.8575, 2.3514)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_zrSBB697T2q8gv0fPJ3I2A","name":"weather","input":{"latitude":"48.8575","longitude":"2.3514"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_zrSBB697T2q8gv0fPJ3I2A","content":[{"text":"Current
        weather at 48.8575, 2.3514: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
        current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012347Z
      X-Amz-Content-Sha256:
      - 77e459c78238697a7bfffabf70268d8969cbe23f31ea50e8e72cfee4aa582e9a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=27dcb5283fdb5687d5170b1ac9df8b174571eaa95f21392dfefd57a262d9f0ce
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 429
      message: Too Many Requests
    headers:
      Date:
      - Tue, 16 Sep 2025 01:23:48 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '65'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 778ff0d6-b8c3-408f-843b-4ff334dde03d
      X-Amzn-Errortype:
      - ThrottlingException:http://internal.amazon.com/coral/com.amazon.bedrock/
    body:
      encoding: UTF-8
      string: '{"message":"Too many requests, please wait before trying again."}'
  recorded_at: Tue, 16 Sep 2025 01:23:48 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":[{"text":"What''s the weather
        in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_tjSgrM_WSC6uBHuFidk3Gw","content":[{"text":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
        current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
        a mild day in the German capital. Would you like to know anything else about
        the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
        Paris? (48.8575, 2.3514)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_zrSBB697T2q8gv0fPJ3I2A","name":"weather","input":{"latitude":"48.8575","longitude":"2.3514"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_zrSBB697T2q8gv0fPJ3I2A","content":[{"text":"Current
        weather at 48.8575, 2.3514: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
        current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250916T012354Z
      X-Amz-Content-Sha256:
      - 77e459c78238697a7bfffabf70268d8969cbe23f31ea50e8e72cfee4aa582e9a
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=1b45cf69032b28389089d4fa7a3ffd76dda7087879eb92af96c59259bc2d69de
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 16 Sep 2025 01:23:55 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '499'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - a2ff9d63-afb0-4c02-9fe6-816bffbe0659
    body:
      encoding: UTF-8
      string: '{"metrics":{"latencyMs":1194},"output":{"message":{"content":[{"text":"The
        current weather in Paris is 15°C with a wind speed of 10 km/h. Interestingly,
        it''s quite similar to the weather in Berlin at the moment. Would you like
        to know about the weather in any other location?"}],"role":"assistant"}},"stopReason":"end_turn","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":687,"outputTokens":57,"totalTokens":744}}'
  recorded_at: Tue, 16 Sep 2025 01:23:55 GMT
recorded_with: VCR 6.3.1
