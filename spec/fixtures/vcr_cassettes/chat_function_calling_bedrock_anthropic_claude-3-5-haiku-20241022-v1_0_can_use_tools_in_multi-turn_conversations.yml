---
http_interactions:
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s the weather
          in Berlin? (52.5200, 13.4050)"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
          current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
          (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
          13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041357Z
        X-Amz-Content-Sha256:
          - b953cce59aafaeaa008e7d7c66fa77c653a967f1cc0194e6c72264ac7fece23f
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=fa9db78892c68fc4785eb5ebe44dc9848db16175f0d2b2c691887516f50a20a1
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:13:59 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "496"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - e6525dea-d88e-48b0-85bc-850a358e8247
      body:
        encoding: UTF-8
        string:
          '{"metrics":{"latencyMs":1523},"output":{"message":{"content":[{"text":"I''ll
          check the current weather for Berlin using the provided coordinates."},{"toolUse":{"input":{"latitude":"52.5200","longitude":"13.4050"},"name":"weather","toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":389,"outputTokens":88,"totalTokens":477}}'
    recorded_at: Thu, 11 Sep 2025 04:13:59 GMT
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s the weather
          in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","content":[{"text":"Current
          weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
          current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
          (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
          13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041359Z
        X-Amz-Content-Sha256:
          - 0b0c820e05121a8272ba4dc26197c1124aff08363b304a08b3c3fc9c5337e83a
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=3f8f5b676d446e1efc4ee784908dbcb2d35b37d0297c94dad61c00b52de76048
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:14:01 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "466"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - 18b30f02-cc36-4618-8203-13371cfa2d73
      body:
        encoding: ASCII-8BIT
        string: !binary |-
          eyJtZXRyaWNzIjp7ImxhdGVuY3lNcyI6MTI3OH0sIm91dHB1dCI6eyJtZXNzYWdlIjp7ImNvbnRlbnQiOlt7InRleHQiOiJUaGUgY3VycmVudCB3ZWF0aGVyIGluIEJlcmxpbiBpcyAxNcKwQyB3aXRoIGEgd2luZCBzcGVlZCBvZiAxMCBrbS9oLiBJdCBzZWVtcyBsaWtlIGEgbWlsZCBkYXkgaW4gdGhlIEdlcm1hbiBjYXBpdGFsLiBXb3VsZCB5b3UgbGlrZSB0byBrbm93IGFueXRoaW5nIGVsc2UgYWJvdXQgdGhlIHdlYXRoZXI/In1dLCJyb2xlIjoiYXNzaXN0YW50In19LCJzdG9wUmVhc29uIjoiZW5kX3R1cm4iLCJ1c2FnZSI6eyJjYWNoZVJlYWRJbnB1dFRva2VuQ291bnQiOjAsImNhY2hlUmVhZElucHV0VG9rZW5zIjowLCJjYWNoZVdyaXRlSW5wdXRUb2tlbkNvdW50IjowLCJjYWNoZVdyaXRlSW5wdXRUb2tlbnMiOjAsImlucHV0VG9rZW5zIjo1MDMsIm91dHB1dFRva2VucyI6NDgsInRvdGFsVG9rZW5zIjo1NTF9fQ==
    recorded_at: Thu, 11 Sep 2025 04:14:01 GMT
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s the weather
          in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","content":[{"text":"Current
          weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
          current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
          a mild day in the German capital. Would you like to know anything else about
          the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
          Paris? (48.8575, 2.3514)"}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
          current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
          (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
          13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041404Z
        X-Amz-Content-Sha256:
          - 24d1e2f28fe4ff64f500e30564975c9e82a29aeb636eba48bebe61bd031acdd2
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=7dd1a01427f7e4378c8ff438f69f328f1e97c0b65516b46acd3c2a5d71af73ac
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:14:06 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "464"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - a3327100-ef7f-4b5e-a6c1-6038658f56d3
      body:
        encoding: UTF-8
        string:
          '{"metrics":{"latencyMs":1280},"output":{"message":{"content":[{"text":"Let
          me check the weather in Paris for you:"},{"toolUse":{"input":{"latitude":"48.8575","longitude":"2.3514"},"name":"weather","toolUseId":"tooluse_n3FOxr0gRiG5wSvwe9ZuCQ"}}],"role":"assistant"}},"stopReason":"tool_use","usage":{"cacheReadInputTokenCount":0,"cacheReadInputTokens":0,"cacheWriteInputTokenCount":0,"cacheWriteInputTokens":0,"inputTokens":573,"outputTokens":85,"totalTokens":658}}'
    recorded_at: Thu, 11 Sep 2025 04:14:06 GMT
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s the weather
          in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","content":[{"text":"Current
          weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
          current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
          a mild day in the German capital. Would you like to know anything else about
          the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
          Paris? (48.8575, 2.3514)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_n3FOxr0gRiG5wSvwe9ZuCQ","name":"weather","input":{"latitude":"48.8575","longitude":"2.3514"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_n3FOxr0gRiG5wSvwe9ZuCQ","content":[{"text":"Current
          weather at 48.8575, 2.3514: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
          current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
          (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
          13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041406Z
        X-Amz-Content-Sha256:
          - 5e3467773a59b218fb0872662bf054f2104a97e08c717c3f7ca2831fe72ff212
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=35b2388173244946fd9f1893d71900683d8012b4d61157c3784bf7d56a817771
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 429
        message: Too Many Requests
      headers:
        Date:
          - Thu, 11 Sep 2025 04:14:07 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "65"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - b2071fd8-3596-4d2d-9987-d6df01e58ecf
        X-Amzn-Errortype:
          - ThrottlingException:http://internal.amazon.com/coral/com.amazon.bedrock/
      body:
        encoding: UTF-8
        string: '{"message":"Too many requests, please wait before trying again."}'
    recorded_at: Thu, 11 Sep 2025 04:14:07 GMT
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string:
          '{"messages":[{"role":"user","content":[{"text":"What''s the weather
          in Berlin? (52.5200, 13.4050)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","name":"weather","input":{"latitude":"52.5200","longitude":"13.4050"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_VIFyMsyWR3KPFPKt6uRi8w","content":[{"text":"Current
          weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h"}]}}]},{"role":"assistant","content":[{"text":"The
          current weather in Berlin is 15°C with a wind speed of 10 km/h. It seems like
          a mild day in the German capital. Would you like to know anything else about
          the weather?"}]},{"role":"user","content":[{"text":"What''s the weather in
          Paris? (48.8575, 2.3514)"}]},{"role":"assistant","content":[{"toolUse":{"toolUseId":"tooluse_n3FOxr0gRiG5wSvwe9ZuCQ","name":"weather","input":{"latitude":"48.8575","longitude":"2.3514"}}}]},{"role":"user","content":[{"toolResult":{"toolUseId":"tooluse_n3FOxr0gRiG5wSvwe9ZuCQ","content":[{"text":"Current
          weather at 48.8575, 2.3514: 15°C, Wind: 10 km/h"}]}}]}],"inferenceConfig":{"maxTokens":4096},"toolConfig":{"tools":[{"toolSpec":{"name":"weather","description":"Gets
          current weather for a location","inputSchema":{"json":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
          (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
          13.4050)"}},"required":["latitude","longitude"]}}}}],"toolChoice":{"auto":{}}}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250911T041413Z
        X-Amz-Content-Sha256:
          - 5e3467773a59b218fb0872662bf054f2104a97e08c717c3f7ca2831fe72ff212
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250911/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=adcb22e18effe0abc3be7d7519abbdb318cb13bf3a9749435ea98b6f1c091c0c
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 200
        message: OK
      headers:
        Date:
          - Thu, 11 Sep 2025 04:14:16 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "551"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - 9318d21e-bbf1-4555-9027-52822824e9d9
      body:
        encoding: ASCII-8BIT
        string: !binary |-
          eyJtZXRyaWNzIjp7ImxhdGVuY3lNcyI6MTQyM30sIm91dHB1dCI6eyJtZXNzYWdlIjp7ImNvbnRlbnQiOlt7InRleHQiOiJUaGUgY3VycmVudCB3ZWF0aGVyIGluIFBhcmlzIGlzIDE1wrBDIHdpdGggYSB3aW5kIHNwZWVkIG9mIDEwIGttL2guIEludGVyZXN0aW5nbHksIGl0J3MgZXhhY3RseSB0aGUgc2FtZSB3ZWF0aGVyIGNvbmRpdGlvbnMgYXMgQmVybGluIHJpZ2h0IG5vdy4gSXQgc291bmRzIGxpa2UgYSBwbGVhc2FudCBkYXkgaW4gdGhlIENpdHkgb2YgTGlnaHQuIElzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSB0byBrbm93IGFib3V0IHRoZSB3ZWF0aGVyPyJ9XSwicm9sZSI6ImFzc2lzdGFudCJ9fSwic3RvcFJlYXNvbiI6ImVuZF90dXJuIiwidXNhZ2UiOnsiY2FjaGVSZWFkSW5wdXRUb2tlbkNvdW50IjowLCJjYWNoZVJlYWRJbnB1dFRva2VucyI6MCwiY2FjaGVXcml0ZUlucHV0VG9rZW5Db3VudCI6MCwiY2FjaGVXcml0ZUlucHV0VG9rZW5zIjowLCJpbnB1dFRva2VucyI6Njg3LCJvdXRwdXRUb2tlbnMiOjY4LCJ0b3RhbFRva2VucyI6NzU1fX0=
    recorded_at: Thu, 11 Sep 2025 04:14:15 GMT
recorded_with: VCR 6.3.1
