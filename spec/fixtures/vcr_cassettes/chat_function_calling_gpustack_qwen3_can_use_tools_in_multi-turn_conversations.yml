---
http_interactions:
- request:
    method: post
    uri: "<GPUSTACK_API_BASE>/chat/completions"
    body:
      encoding: UTF-8
      string: '{"model":"qwen3","messages":[{"role":"user","content":"What''s the
        weather in Berlin? (52.5200, 13.4050)"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"],"additionalProperties":false,"strict":true}}}],"enable_thinking":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <GPUSTACK_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 15:55:50 GMT
      - Fri, 09 Jan 2026 15:55:50 GMT
      Server:
      - uvicorn
      - uvicorn
      Keep-Alive:
      - timeout=15, max=100
      Content-Length:
      - '1397'
      Content-Type:
      - application/json
      X-Request-Accepted-At:
      - "<X_REQUEST_ID>"
      X-Request-Id:
      - "<X_REQUEST_ID>"
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: UTF-8
      string: '{"choices":[{"finish_reason":"tool_calls","index":0,"message":{"content":null,"reasoning_content":"\nOkay,
        the user is asking for the weather in Berlin, and they provided the coordinates
        52.5200 latitude and 13.4050 longitude. I need to check if I should use the
        weather function here. The function requires latitude and longitude as parameters,
        both of which are provided in the query. Since the user included the exact
        coordinates, I should call the weather function with those values. There''s
        no need to ask for more information because all required parameters are present.
        I''ll format the tool call correctly with the given coordinates.\n","role":"assistant","tool_calls":[{"function":{"arguments":"{\"latitude\":\"52.5200\",\"longitude\":\"13.4050\"}","name":"weather"},"id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1","type":"function"}]}}],"created":1767974152,"id":"chatcmpl-6S1FqEeitUzDFq7HGsLtYD4lVDGOciMn","model":"qwen3","object":"chat.completion","usage":{"completion_tokens":154,"completion_tokens_details":{"accepted_prediction_tokens":0,"reasoning_tokens":116,"rejected_prediction_tokens":0},"draft_tokens":0,"draft_tokens_acceptance":0.0,"prompt_tokens":269,"prompt_tokens_details":{"cached_tokens":268},"prompt_tokens_per_second":27502.300378284428,"time_per_output_token_ms":8.225188311688312,"time_to_first_token_ms":9.781,"tokens_per_second":121.5777635849335,"total_tokens":423}}'
  recorded_at: Fri, 09 Jan 2026 15:55:51 GMT
- request:
    method: post
    uri: "<GPUSTACK_API_BASE>/chat/completions"
    body:
      encoding: UTF-8
      string: '{"model":"qwen3","messages":[{"role":"user","content":"What''s the
        weather in Berlin? (52.5200, 13.4050)"},{"role":"assistant","tool_calls":[{"id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1","type":"function","function":{"name":"weather","arguments":"{\"latitude\":\"52.5200\",\"longitude\":\"13.4050\"}"}}]},{"role":"tool","content":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h","tool_call_id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"],"additionalProperties":false,"strict":true}}}],"enable_thinking":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <GPUSTACK_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 15:55:51 GMT
      - Fri, 09 Jan 2026 15:55:51 GMT
      Server:
      - uvicorn
      - uvicorn
      Keep-Alive:
      - timeout=15, max=100
      Content-Length:
      - '1247'
      Content-Type:
      - application/json
      X-Request-Accepted-At:
      - "<X_REQUEST_ID>"
      X-Request-Id:
      - "<X_REQUEST_ID>"
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJjaG9pY2VzIjpbeyJmaW5pc2hfcmVhc29uIjoic3RvcCIsImluZGV4IjowLCJtZXNzYWdlIjp7ImNvbnRlbnQiOiJcblxuVGhlIGN1cnJlbnQgd2VhdGhlciBpbiBCZXJsaW4gKDUyLjUyMDAsIDEzLjQwNTApIGlzIDE1wrBDIHdpdGggd2luZCBzcGVlZHMgb2YgMTAga20vaC4iLCJyZWFzb25pbmdfY29udGVudCI6IlxuT2theSwgdGhlIHVzZXIgYXNrZWQgZm9yIHRoZSB3ZWF0aGVyIGluIEJlcmxpbiB3aXRoIHRoZSBjb29yZGluYXRlcyBwcm92aWRlZC4gSSBjYWxsZWQgdGhlIHdlYXRoZXIgZnVuY3Rpb24gd2l0aCB0aG9zZSBjb29yZGluYXRlcy4gVGhlIHJlc3BvbnNlIGNhbWUgYmFjayBhcyAxNcKwQyBhbmQgd2luZCBhdCAxMCBrbS9oLiBOb3cgSSBuZWVkIHRvIHByZXNlbnQgdGhpcyBpbmZvcm1hdGlvbiBjbGVhcmx5LiBMZXQgbWUgY2hlY2sgaWYgdGhlcmUncyBhbnkgYWRkaXRpb25hbCBkZXRhaWxzIG5lZWRlZCwgYnV0IHRoZSB1c2VyIGp1c3Qgd2FudGVkIHRoZSBjdXJyZW50IHdlYXRoZXIuIFNvIEknbGwgc3RhdGUgdGhlIHRlbXBlcmF0dXJlIGFuZCB3aW5kIHNwZWVkIGluIGEgZnJpZW5kbHkgbWFubmVyLiBNYWtlIHN1cmUgdG8gbWVudGlvbiBCZXJsaW4gYXMgd2VsbCB0byBjb25maXJtIHRoZSBsb2NhdGlvbi4gQWxyaWdodCwgdGhhdCdzIGFsbC5cbiIsInJvbGUiOiJhc3Npc3RhbnQifX1dLCJjcmVhdGVkIjoxNzY3OTc0MTUzLCJpZCI6ImNoYXRjbXBsLTN3bjgweDVWaUJSZTBGZmRoZU92TFdCWDl1V0RQVnQyIiwibW9kZWwiOiJxd2VuMyIsIm9iamVjdCI6ImNoYXQuY29tcGxldGlvbiIsInVzYWdlIjp7ImNvbXBsZXRpb25fdG9rZW5zIjoxNDYsImNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMiOnsiYWNjZXB0ZWRfcHJlZGljdGlvbl90b2tlbnMiOjAsInJlYXNvbmluZ190b2tlbnMiOjEwNSwicmVqZWN0ZWRfcHJlZGljdGlvbl90b2tlbnMiOjB9LCJkcmFmdF90b2tlbnMiOjAsImRyYWZ0X3Rva2Vuc19hY2NlcHRhbmNlIjowLjAsInByb21wdF90b2tlbnMiOjM0MiwicHJvbXB0X3Rva2Vuc19kZXRhaWxzIjp7ImNhY2hlZF90b2tlbnMiOjI2OH0sInByb21wdF90b2tlbnNfcGVyX3NlY29uZCI6MTM2MzMuNjQ1NjA0OTQzMTkzLCJ0aW1lX3Blcl9vdXRwdXRfdG9rZW5fbXMiOjguMzY1NDMxNTA2ODQ5MzE1LCJ0aW1lX3RvX2ZpcnN0X3Rva2VuX21zIjoyNS4wODUsInRva2Vuc19wZXJfc2Vjb25kIjoxMTkuNTM5NTU5ODE2MDQwMDcsInRvdGFsX3Rva2VucyI6NDg4fX0=
  recorded_at: Fri, 09 Jan 2026 15:55:53 GMT
- request:
    method: post
    uri: "<GPUSTACK_API_BASE>/chat/completions"
    body:
      encoding: UTF-8
      string: '{"model":"qwen3","messages":[{"role":"user","content":"What''s the
        weather in Berlin? (52.5200, 13.4050)"},{"role":"assistant","tool_calls":[{"id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1","type":"function","function":{"name":"weather","arguments":"{\"latitude\":\"52.5200\",\"longitude\":\"13.4050\"}"}}]},{"role":"tool","content":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h","tool_call_id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1"},{"role":"assistant","content":"\n\nThe
        current weather in Berlin (52.5200, 13.4050) is 15°C with wind speeds of 10
        km/h."},{"role":"user","content":"What''s the weather in Paris? (48.8575,
        2.3514)"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"],"additionalProperties":false,"strict":true}}}],"enable_thinking":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <GPUSTACK_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 15:55:52 GMT
      - Fri, 09 Jan 2026 15:55:53 GMT
      Server:
      - uvicorn
      - uvicorn
      Keep-Alive:
      - timeout=15, max=100
      Content-Length:
      - '1323'
      Content-Type:
      - application/json
      X-Request-Accepted-At:
      - "<X_REQUEST_ID>"
      X-Request-Id:
      - "<X_REQUEST_ID>"
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: UTF-8
      string: '{"choices":[{"finish_reason":"tool_calls","index":0,"message":{"content":null,"reasoning_content":"\nOkay,
        the user is asking for the weather in Paris with the coordinates 48.8575 and
        2.3514. I need to check if I have a function for that. The previous tool used
        was the weather function, which takes latitude and longitude. So I should
        call the same function here. Let me make sure the parameters are correctly
        formatted as strings. The user provided the coordinates in the right order,
        latitude first, then longitude. I''ll structure the tool call with those values.\n","role":"assistant","tool_calls":[{"function":{"arguments":"{\"latitude\":\"48.8575\",\"longitude\":\"2.3514\"}","name":"weather"},"id":"call-7MbpyePAQq17gdmbkJp8IexEMclsvYQ9","type":"function"}]}}],"created":1767974154,"id":"chatcmpl-bNnyniQodvgP6djhtEaYnw0nrEcGowal","model":"qwen3","object":"chat.completion","usage":{"completion_tokens":138,"completion_tokens_details":{"accepted_prediction_tokens":0,"reasoning_tokens":107,"rejected_prediction_tokens":0},"draft_tokens":0,"draft_tokens_acceptance":0.0,"prompt_tokens":414,"prompt_tokens_details":{"cached_tokens":340},"prompt_tokens_per_second":16392.144440924927,"time_per_output_token_ms":8.30095652173913,"time_to_first_token_ms":25.256,"tokens_per_second":120.46804454175005,"total_tokens":552}}'
  recorded_at: Fri, 09 Jan 2026 15:55:54 GMT
- request:
    method: post
    uri: "<GPUSTACK_API_BASE>/chat/completions"
    body:
      encoding: UTF-8
      string: '{"model":"qwen3","messages":[{"role":"user","content":"What''s the
        weather in Berlin? (52.5200, 13.4050)"},{"role":"assistant","tool_calls":[{"id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1","type":"function","function":{"name":"weather","arguments":"{\"latitude\":\"52.5200\",\"longitude\":\"13.4050\"}"}}]},{"role":"tool","content":"Current
        weather at 52.5200, 13.4050: 15°C, Wind: 10 km/h","tool_call_id":"call-pfXXxApuyhWnoTFjavcQZ6jwqAbCscG1"},{"role":"assistant","content":"\n\nThe
        current weather in Berlin (52.5200, 13.4050) is 15°C with wind speeds of 10
        km/h."},{"role":"user","content":"What''s the weather in Paris? (48.8575,
        2.3514)"},{"role":"assistant","tool_calls":[{"id":"call-7MbpyePAQq17gdmbkJp8IexEMclsvYQ9","type":"function","function":{"name":"weather","arguments":"{\"latitude\":\"48.8575\",\"longitude\":\"2.3514\"}"}}]},{"role":"tool","content":"Current
        weather at 48.8575, 2.3514: 15°C, Wind: 10 km/h","tool_call_id":"call-7MbpyePAQq17gdmbkJp8IexEMclsvYQ9"}],"stream":false,"tools":[{"type":"function","function":{"name":"weather","description":"Gets
        current weather for a location","parameters":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"],"additionalProperties":false,"strict":true}}}],"enable_thinking":false}'
    headers:
      User-Agent:
      - Faraday v2.14.0
      Authorization:
      - Bearer <GPUSTACK_API_KEY>
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 09 Jan 2026 15:55:53 GMT
      - Fri, 09 Jan 2026 15:55:54 GMT
      Server:
      - uvicorn
      - uvicorn
      Keep-Alive:
      - timeout=15, max=100
      Content-Length:
      - '1575'
      Content-Type:
      - application/json
      X-Request-Accepted-At:
      - "<X_REQUEST_ID>"
      X-Request-Id:
      - "<X_REQUEST_ID>"
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJjaG9pY2VzIjpbeyJmaW5pc2hfcmVhc29uIjoic3RvcCIsImluZGV4IjowLCJtZXNzYWdlIjp7ImNvbnRlbnQiOiJcblxuVGhlIGN1cnJlbnQgd2VhdGhlciBpbiBQYXJpcyAoNDguODU3NSwgMi4zNTE0KSBpcyAxNcKwQyB3aXRoIHdpbmQgc3BlZWRzIG9mIDEwIGttL2guIiwicmVhc29uaW5nX2NvbnRlbnQiOiJcbk9rYXksIHRoZSB1c2VyIGFza2VkIGZvciB0aGUgd2VhdGhlciBpbiBQYXJpcyB3aXRoIGNvb3JkaW5hdGVzIDQ4Ljg1NzUsIDIuMzUxNC4gSSBuZWVkIHRvIGNoZWNrIGlmIEkgaGF2ZSB0aGUgcmlnaHQgZnVuY3Rpb24gdG8gY2FsbC4gVGhlIGF2YWlsYWJsZSB0b29sIGlzIHRoZSB3ZWF0aGVyIGZ1bmN0aW9uIHRoYXQgdGFrZXMgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS4gSSdsbCB1c2UgdGhhdCBhZ2Fpbi5cblxuV2FpdCwgdGhlIHByZXZpb3VzIGludGVyYWN0aW9uIGZvciBCZXJsaW4gdXNlZCB0aGUgc2FtZSBmdW5jdGlvbiwgYW5kIGl0IHdvcmtlZC4gU28gSSBqdXN0IHBsdWcgaW4gdGhlIFBhcmlzIGNvb3JkaW5hdGVzLiBMZXQgbWUgbWFrZSBzdXJlIHRoZSBwYXJhbWV0ZXJzIGFyZSBjb3JyZWN0bHkgZm9ybWF0dGVkIGFzIHN0cmluZ3MuIFRoZSB1c2VyIHByb3ZpZGVkIHRoZSBjb29yZGluYXRlcyBpbiB0aGUgcmlnaHQgb3JkZXIsIGxhdGl0dWRlIGZpcnN0LCB0aGVuIGxvbmdpdHVkZS4gXG5cbkkgc2hvdWxkIGdlbmVyYXRlIHRoZSB0b29sIGNhbGwgd2l0aCB0aG9zZSB2YWx1ZXMuIE5vIG5lZWQgZm9yIGV4dHJhIHN0ZXBzIGhlcmUuIFRoZSByZXNwb25zZSBmcm9tIHRoZSB0b29sIHdpbGwgZ2l2ZSB0aGUgY3VycmVudCB3ZWF0aGVyIGRldGFpbHMuIE9uY2UgSSBnZXQgdGhhdCwgSSBjYW4gcmVsYXkgdGhlIHRlbXBlcmF0dXJlIGFuZCB3aW5kIGluZm8gYmFjayB0byB0aGUgdXNlciBpbiBhIGZyaWVuZGx5IHdheS4gTGV0IG1lIHN0cnVjdHVyZSB0aGUgSlNPTiBwcm9wZXJseSB3aXRob3V0IGFueSBlcnJvcnMuXG4iLCJyb2xlIjoiYXNzaXN0YW50In19XSwiY3JlYXRlZCI6MTc2Nzk3NDE1NiwiaWQiOiJjaGF0Y21wbC1yeURrOXFKVmptWDRSblJaaFBJVExpWGV0NUFpVGxGTSIsIm1vZGVsIjoicXdlbjMiLCJvYmplY3QiOiJjaGF0LmNvbXBsZXRpb24iLCJ1c2FnZSI6eyJjb21wbGV0aW9uX3Rva2VucyI6MjE4LCJjb21wbGV0aW9uX3Rva2Vuc19kZXRhaWxzIjp7ImFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zIjowLCJyZWFzb25pbmdfdG9rZW5zIjoxNzgsInJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zIjowfSwiZHJhZnRfdG9rZW5zIjowLCJkcmFmdF90b2tlbnNfYWNjZXB0YW5jZSI6MC4wLCJwcm9tcHRfdG9rZW5zIjo0ODUsInByb21wdF90b2tlbnNfZGV0YWlscyI6eyJjYWNoZWRfdG9rZW5zIjo0MTN9LCJwcm9tcHRfdG9rZW5zX3Blcl9zZWNvbmQiOjE5NDI1LjY0MTg0NzIzODM1NiwidGltZV9wZXJfb3V0cHV0X3Rva2VuX21zIjo4LjA4MjgwMjc1MjI5MzU3OCwidGltZV90b19maXJzdF90b2tlbl9tcyI6MjQuOTY3LCJ0b2tlbnNfcGVyX3NlY29uZCI6MTIzLjcxOTQ2MTAxNDQ2NTU0LCJ0b3RhbF90b2tlbnMiOjcwM319
  recorded_at: Fri, 09 Jan 2026 15:55:56 GMT
recorded_with: VCR 6.4.0
