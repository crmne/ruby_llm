---
http_interactions:
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-3-5-haiku-20241022","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the fall of Rome?"}]}],"stream":false,"max_tokens":8192,"tools":[{"name":"weather","description":"Gets
        current weather for a location","input_schema":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}],"tool_choice":{"type":"tool","name":"weather"}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      Anthropic-Version:
      - '2023-06-01'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 23 Sep 2025 22:59:27 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '400000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '400000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2025-09-23T22:59:26Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '80000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '80000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2025-09-23T22:59:27Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '4000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '3999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2025-09-23T22:59:26Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '480000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '480000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2025-09-23T22:59:26Z'
      Request-Id:
      - "<REQUEST_ID>"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - "<ANTHROPIC_ORGANIZATION_ID>"
      X-Envoy-Upstream-Service-Time:
      - '1045'
      Via:
      - 1.1 google
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: '{"id":"msg_01PnqzzGkuf91SLFFz3EiQSq","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[{"type":"tool_use","id":"toolu_01GcLgKHyM5kXBsnWAaLbPnb","name":"weather","input":{"latitude":"41.9028","longitude":"12.4964"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":471,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":56,"service_tier":"standard"}}'
  recorded_at: Tue, 23 Sep 2025 22:59:27 GMT
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-3-5-haiku-20241022","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the fall of Rome?"}]},{"role":"assistant","content":[{"type":"tool_use","id":"toolu_01GcLgKHyM5kXBsnWAaLbPnb","name":"weather","input":{"latitude":"41.9028","longitude":"12.4964"}}]},{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_01GcLgKHyM5kXBsnWAaLbPnb","content":[{"type":"text","text":"Current
        weather at 41.9028, 12.4964: 15Â°C, Wind: 10 km/h"}]}]}],"stream":false,"max_tokens":8192,"tools":[{"name":"weather","description":"Gets
        current weather for a location","input_schema":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}]}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      Anthropic-Version:
      - '2023-06-01'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 23 Sep 2025 22:59:33 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '400000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '400000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2025-09-23T22:59:27Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '80000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '80000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2025-09-23T22:59:33Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '4000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '3999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2025-09-23T22:59:27Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '480000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '480000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2025-09-23T22:59:27Z'
      Request-Id:
      - "<REQUEST_ID>"
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - "<ANTHROPIC_ORGANIZATION_ID>"
      X-Envoy-Upstream-Service-Time:
      - '6347'
      Via:
      - 1.1 google
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Server:
      - cloudflare
      Cf-Ray:
      - "<CF_RAY>"
    body:
      encoding: ASCII-8BIT
      string: '{"id":"msg_01ArUN4JDfoAhr2Qk2r51KnG","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[{"type":"text","text":"I
        apologize, but the weather function is not related to historical information
        about the Fall of Rome. Let me provide you with a historical explanation:\n\nThe
        Fall of Rome typically refers to the collapse of the Western Roman Empire,
        which is traditionally dated to 476 CE. This was a complex historical process
        that occurred over several centuries, marked by several key events:\n\n1.
        Internal Decline: The Roman Empire suffered from political instability, economic
        problems, and social decay.\n\n2. Military Challenges: Constant invasions
        by \"barbarian\" tribes, particularly Germanic peoples like the Goths and
        Vandals, weakened the empire''s borders.\n\n3. Specific Event: In 476 CE,
        the Germanic leader Odoacer deposed the last Roman Emperor in the West, Romulus
        Augustulus, which is often considered the symbolic end of the Western Roman
        Empire.\n\n4. Contributing Factors:\n- Overexpansion of the empire\n- Economic
        troubles\n- Increasing military expenses\n- Corruption\n- Division of the
        empire into Western and Eastern (Byzantine) halves\n- Invasions by external
        tribes\n\nThe Eastern Roman Empire (Byzantine Empire) continued to exist for
        nearly another thousand years until Constantinople fell to the Ottoman Turks
        in 1453.\n\nThis historical event marked the end of classical antiquity and
        the beginning of the Medieval period in European history."}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":491,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":295,"service_tier":"standard"}}'
  recorded_at: Tue, 23 Sep 2025 22:59:33 GMT
recorded_with: VCR 6.3.1
