---
http_interactions:
  - request:
      method: post
      uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/converse
      body:
        encoding: UTF-8
        string: '{"messages":[{"role":"user","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"assistant","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"user","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"assistant","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"user","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"assistant","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"user","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"assistant","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"user","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"assistant","content":[{"text":"<MASSIVE_TEXT>"}]},{"role":"user","content":[{"text":"Hi"}]}],"inferenceConfig":{"maxTokens":4096}}'
      headers:
        User-Agent:
          - Faraday v2.13.4
        Host:
          - bedrock-runtime.<AWS_REGION>.amazonaws.com
        X-Amz-Date:
          - 20250916T012249Z
        X-Amz-Content-Sha256:
          - 4db19dc1465cf5eabd86fb145897819d3b9189c45dcba73348a4ab6a0042db7f
        Authorization:
          - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250916/<AWS_REGION>/bedrock/aws4_request,
            SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=f4b421778870f3bcf2643767ecbfb364f705d6f77534d42b9774620b3c400248
        Content-Type:
          - application/json
        Accept:
          - application/json
        Accept-Encoding:
          - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
    response:
      status:
        code: 400
        message: Bad Request
      headers:
        Date:
          - Tue, 16 Sep 2025 01:22:54 GMT
        Content-Type:
          - application/json
        Content-Length:
          - "100"
        Connection:
          - keep-alive
        X-Amzn-Requestid:
          - 1b711cf5-3499-4ec2-9c3e-8eafdad46125
        X-Amzn-Errortype:
          - ValidationException:http://internal.amazon.com/coral/com.amazon.bedrock/
      body:
        encoding: UTF-8
        string:
          '{"message":"The model returned the following errors: too many total
          text bytes: 10000002 > 9000000"}'
    recorded_at: Tue, 16 Sep 2025 01:22:54 GMT
recorded_with: VCR 6.3.1
