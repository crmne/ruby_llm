---
http_interactions:
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/invoke
    body:
      encoding: UTF-8
      string: '{"anthropic_version":"bedrock-2023-05-31","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the fall of Rome?"}]}],"max_tokens":4096,"tools":[{"name":"weather","description":"Gets
        current weather for a location","input_schema":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}],"tool_choice":{"type":"tool","name":"weather"}}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250923T225933Z
      X-Amz-Content-Sha256:
      - 661cb72b7b51ee6b81def603d6a47e0f50d39bc17e25595818c2b40c09c83a07
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250923/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=6d41ed04e85e46dd75ed7f7d7550fe83be4fdf0beac1cffa378a11984f1311bd
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 23 Sep 2025 22:59:36 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '413'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 84701b2c-765f-4ab3-8402-2e791fbff465
      X-Amzn-Bedrock-Invocation-Latency:
      - '2433'
      X-Amzn-Bedrock-Output-Token-Count:
      - '56'
      X-Amzn-Bedrock-Input-Token-Count:
      - '471'
    body:
      encoding: UTF-8
      string: '{"id":"msg_bdrk_015HrsnnfR2hfHhQas5449PJ","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[{"type":"tool_use","id":"toolu_bdrk_01BYaKhdCDDawU5USiPsuweT","name":"weather","input":{"latitude":"41.9028","longitude":"12.4964"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":471,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":56}}'
  recorded_at: Tue, 23 Sep 2025 22:59:36 GMT
- request:
    method: post
    uri: https://bedrock-runtime.<AWS_REGION>.amazonaws.com/model/anthropic.claude-3-5-haiku-20241022-v1:0/invoke
    body:
      encoding: UTF-8
      string: '{"anthropic_version":"bedrock-2023-05-31","messages":[{"role":"user","content":[{"type":"text","text":"What''s
        the fall of Rome?"}]},{"role":"assistant","content":[{"type":"tool_use","id":"toolu_bdrk_01BYaKhdCDDawU5USiPsuweT","name":"weather","input":{"latitude":"41.9028","longitude":"12.4964"}}]},{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_bdrk_01BYaKhdCDDawU5USiPsuweT","content":[{"type":"text","text":"Current
        weather at 41.9028, 12.4964: 15Â°C, Wind: 10 km/h"}]}]}],"max_tokens":4096,"tools":[{"name":"weather","description":"Gets
        current weather for a location","input_schema":{"type":"object","properties":{"latitude":{"type":"string","description":"Latitude
        (e.g., 52.5200)"},"longitude":{"type":"string","description":"Longitude (e.g.,
        13.4050)"}},"required":["latitude","longitude"]}}]}'
    headers:
      User-Agent:
      - Faraday v2.13.4
      Host:
      - bedrock-runtime.<AWS_REGION>.amazonaws.com
      X-Amz-Date:
      - 20250923T225936Z
      X-Amz-Content-Sha256:
      - e80fd73036e49336f253e3eb381bbe55d7dee20f6910c34e4cb3ab0689abf2b5
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_ACCESS_KEY_ID>/20250923/<AWS_REGION>/bedrock/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=32daf224ca97ce94618bc6c7fab9696e812fb5d016d86eac639f959371cf34b0
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 23 Sep 2025 22:59:42 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '1918'
      Connection:
      - keep-alive
      X-Amzn-Requestid:
      - 34bd0b58-793a-475e-bddb-45cfd8d6705f
      X-Amzn-Bedrock-Invocation-Latency:
      - '5963'
      X-Amzn-Bedrock-Output-Token-Count:
      - '331'
      X-Amzn-Bedrock-Input-Token-Count:
      - '491'
    body:
      encoding: UTF-8
      string: '{"id":"msg_bdrk_01XrTxbJ3GiQtaFgK4UFYBLu","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[{"type":"text","text":"I
        apologize, but the weather function is not relevant to your question about
        the Fall of Rome. Let me provide a historical explanation:\n\nThe Fall of
        Rome refers to the decline and ultimate collapse of the Western Roman Empire,
        which occurred gradually over several centuries, traditionally marked by the
        deposition of the last Roman Emperor Romulus Augustulus in 476 CE by the Germanic
        king Odoacer.\n\nKey points about the Fall of Rome include:\n\n1. Multiple
        Factors: The fall was caused by a complex combination of internal and external
        challenges:\n- Political instability and frequent civil wars\n- Economic decline
        and overextension of the empire\n- Military pressures from Germanic tribes
        and other external invaders\n- Social and moral decay\n- Corruption in government\n-
        Division of the empire into Western and Eastern (Byzantine) halves\n\n2. Barbarian
        Invasions: Germanic tribes like the Goths, Vandals, and Franks continuously
        pressured Roman borders and eventually settled within imperial territories.\n\n3.
        Economic Challenges: High taxation, decreased agricultural productivity, and
        reduced trade weakened the empire''s economic foundation.\n\n4. Military Weakness:
        The Roman military became less effective, relying more on mercenaries and
        struggling to defend vast territories.\n\n5. Cultural Transformation: Rather
        than a sudden collapse, it was more a gradual transformation where Roman institutions
        were replaced by Germanic kingdoms.\n\nThe Eastern Roman Empire (Byzantine
        Empire) continued to exist for nearly a thousand years more, until Constantinople
        fell to the Ottoman Turks in 1453."}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":491,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":331}}'
  recorded_at: Tue, 23 Sep 2025 22:59:42 GMT
recorded_with: VCR 6.3.1
